# Тестовое для NEKIDAEM

## Задание
Реализовать rest api:

Имеется база пользователей (добавляются через админку/swagger, регистрацию делать не надо).
У каждого пользователя при создании создается персональный блог. Новые создавать он не может.
Пост в блоге — элементарная запись с заголовком, текстом (140 символов) и временем создания. Заголовок обязательное поле.
Пользователь может подписываться/отписываться на блоги других пользователей (любое количество).
У пользователя есть персональная лента новостей (не более ~500 постов), в которой выводятся посты из блогов, на которые он подписан, в порядке добавления постов. Пагинация по 10 постов.
Пользователь может помечать посты в ленте прочитанными.
При удалении/добавлении поста, лента тоже должна изменяться
Раз в сутки на почту прилетает подборка из 5 последних постов ленты (можно в консоль)
В среднем пользователь подписан на 100 человек, которые постят по 2-3 раза в день.
Предполагаемое кол-во пользователей в системе около 1 млн.
Будет плюсом, если добавить дамп с большим кол-вом записей или добавить команду, которая сама генерирует большой объем данных.
Можно использовать https://mixer.readthedocs.io/en/latest/api.html https://stackoverflow.com/questions/36463134/generate-test-data-in-postgresql-table
Будет плюсом наличие тестов.


Требования:
Python 3.x, Django > 3.х + Drf или FastApi, Postgresql. Можно использовать Celery и Redis. 

Проект должен быть на гитхабе и отражать процесс разработки. НЕ один коммит на всё.

Код максимально приближенный к боевому (насколько получится).

Проект необходимо упаковать в докер. Запускать через docker-compose.

В проекте должно быть README с описанием запуска проекта.

Срок выполнения 1-2 дня.

Ссылку на гитхаб отправить на info@nekidaem.ru.

## Запуск проекта

- Скачайте репозиторий
```
git clone git@github.com:AlexandrSharganov/nek_test.git
```

- В папке проекта выполните команду
```
 docker-compose up -d --build
```
В запущеном проекте автоматически выполнятся миграции подгрузится статика и база данных наполнится тестовыми данными. Базе данных нужно время чтобы подгрузить все данные, дайте ей 2-3 минуты, иначе увидите 502 ошибку. Для доступа к админке перейдите по адресу:  
http://localhost/admin/  
Логин: admin  
Пароль: 123

### Документация по API доступна по адресу:  
- http://localhost/redoc/  

- В документации вы найдете все эндпоинты, необходимые для действий пользователя перечисленных в задании.
- Рассылка 5 последних постов активируется по эндпоинту:  http://localhost/api/v1/send_email/

### Для того чтобы остановить и удалить контейнеры:
```
docker-compose down -v
```

Чтобы все заработало с минимальными издержками прикладываю .env, но вы так не делайте:)

Для проверки эндпоинтов использовал Postman c типом авторизации Basic Auth

### СТЕК:
- django
- drf
- docker
- nginx
- postgresql
- celery
- redis

#### Примечание:
Впервые столкнулся с проблемой автоматического изменения LF в CRLF. Вредный Git, чтоб его. Проблеу решил добавлением файла [.gitattributes](https://github.com/AlexandrSharganov/nek_test/blob/master/.gitattributes)